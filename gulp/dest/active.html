<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css" type="text/css" />
</head>
<body>
<!--head-->
<div id="vip-common-header" class="header vip-common-header clearfix adapt-open">
<div class = "top-nav">
    <div id="J_top_nav" class="head-inner">
        <div id="J_header_address_container" class="c-h-area">
            <div class="c-h-area-header" >
                <div class="c-h-area-title" id="J_header_selected_html">å—äº¬å¸‚</div>
                
                <div class="c-h-area-triangle"></div>
            </div>
            <div class="c-h-area-body" id="J_header_area_content">
                <p class="c-h-area-explain">è¯·é€‰æ‹©ä½ æ‰€åœ¨çš„æ”¶è´§åœ°åŒº</p>
                <div class="c-h-area-tab">
                    <div class="c-h-area-tab-header">
                        <ul class="c-h-area-tab-title">
                                <li id="J_header_tab_province" class="J_header_address_tab c-h-area-tab-title-item is-h-area-tab-title-item-current" data-flag="province">çœä»½</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <ul class="top-nav-tool" id="J-topNavTool">
            <li class="wp-my">
                <ul id="J_head_log" class="login-before login_before user-no-cookies">
                  <li class="wp-user" id="J-wp-user">
                      <span class="user-noid" id="J_user_noId">
                          <a class="J_header_lnkLogin">è¯·ç™»å½•</a>
                      </span> 
                  </li> 
                  <li id="J_Register_hasnoname" class="register_hasnoname">
                        <a  class="i-link J_header_lnkRegister" rel="nofollow">æ³¨å†Œ</a>
                  </li> 
                  <li id="J_signin_wrap" class="wp-sign">
                        <img class= "wp-sign-icon" src="img/header_sign.gif"/>
                      <span>
                          <span id="J_signin_text">ç­¾åˆ°æœ‰ç¤¼</span> 
                      </span>

                  </li> 
                  <li class="wp-service wp-fav-nav">
                        <span>
                        <span id="J_signin_text">æˆ‘çš„è®¢å•</span> 
                        </span>
                  </li>
                  <li class="wp-service wp-fav-nav">
                        <span class="service-in">
                        <span id="J_signin_text">æˆ‘çš„ç‰¹å–</span>
                        <i class="ico-dis"></i> 
                        </span>
                  </li>
                  <li class="wp-service wp-fav-nav">
                        <span class="service-in">
                        <span id="J_signin_text">ä¼šå‘˜ä¿±ä¹éƒ¨</span> 
                        <i class="ico-dis"></i> 
                        </span>
                  </li>
                  <li class="wp-service wp-fav-nav">
                        <span class="service-in">
                        <span id="J_signin_text">å®¢æˆ·æœåŠ¡</span> 
                        <i class="ico-dis"></i> 
                        </span>
                  </li>
                  <li class="wp-service wp-fav-nav">
                        <span class="service-in">
                        <i class="ico-mob"></i>
                        <span id="J_signin_text">æ‰‹æœºç‰ˆ</span> 
                        </span>
                  </li>
                  <li class="last-wp">
                        <span class="service-in">
                        <span id="J_signin_text">æ›´å¤š</span> 
                        <i class="ico-dis"></i> 
                        </span>
                  </li>
                </ul>
            </li>
        </ul>
    </div>
</div>
<div class="head-logo">
    <div class="head-inner  clearfix" id="J-head-inner-def">
        <div id="J_head_cart" class="head-cart head-bag-car J_cart_ico">
            <div class="tool"id="J_shortTime">
                <span class="ico-bag"></span>
                <span class="mycarttext-default" id="J-mycartText">è´­ç‰©è¢‹</span>
                <span id="J_skuCount_container" class="counti-cons-bg">
                        <span id="J_skuCount">0</span>
                </span>
            </div>
        </div>
        <div class="c-logo">
            <div class="header-logo-dop">
                <a target="_blank" href="//www.vip.com/" mars_sead="home_header_vip_logo">
                <img src="img/movevip.gif" alt="å…¨çƒç²¾é€‰_æ­£å“ç‰¹å–" id="J-vipLogo" height="100">
                </a>
            </div>
        </div>
        <div class="c-service  header-vip  has-service-operation  is-service-on-right">
                <img class="c-service-img  J-service-img  " src="img/wfjz.png" width="304" height="100" data-original="//b.appsimg.com/2017/08/31/104/1504179372347.png">
        </div>
    </div>
</div>
<div class="main-nav">
    <div class="main-nav" id="J_main_nav">
        <div class="head-inner">
            <ul class="main-nav-link clearfix" id="J_main_nav_link">
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">é¦–é¡µ</a></li> 
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">å¥³è£…</a></li> 
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">æ¯å©´</a></li> 
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">ç¾å¦†</a></li> 
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">å›½é™…</a></li> 
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">ç”·è£…</a></li>
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">å±…å®¶</a></li> 
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">é‹åŒ…</a></li>
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">è¿åŠ¨</a></li>
                <li class=""><a class="main-nav-atag nav_current menu-item-isbold">ç”Ÿæ´»</a></li>
                <li class="">
                    <a class="main-nav-atag ">æ›´å¤š
                    </a>
                    <i class="ico-dis icon-triangle"></i>
                </li>
            </ul>
        </div>
    </div>
</div>
</div>
<!--timer-->
<div class="plugin plugin-loaded">
    <div class="top-box-1212">
        <div class="top-con-1212">
            <div class="d_time">
                <p class="top-box-note">è·ç¦»æ´»åŠ¨ç»“æŸè¿˜æœ‰</p>
                <i id="J_countDown_D" class="color_hui">03</i>
                <em class="top-note2">å¤©</em>
                <i id="J_countDown_H" class="color_hui">13</i>
                <em class="top-note2">æ—¶</em>
                <i id="J_countDown_M" class="color_hui">09</i>
                <em class="top-note2">åˆ†</em>
                <i id="J_countDown_S" class="color_hui">18</i>
                <span class="top-note2">ç§’</span>
            </div>
        </div>
    </div>
</div>
<!--new   nav-->
<div class = "newnav">
        <img src = "img/hl.jpg"/>
        <img src = "img/hl2.jpg"/>
        <img src = "img/hl1.jpg"/>
</div>
<div class = "plugin plugin-loaded">

</div>
<div class="pictures">
    <img src = "img/lz1.jpg"/>
    <img src = "img/lz2.jpg"/>
    <img src = "img/lz3.jpg"/>
    <img src = "img/lz4.jpg"/>
    <img src = "img/lz5.jpg"/>
    <img src = "img/lz6.jpg"/>
    <img src = "img/lz7.jpg"/>
    <img src = "img/lz8.jpg"/>
    <img src = "img/lz9.jpg"/>
    <img src = "img/zl10.jpg"/>
    <img src = "img/lz11.jpg"/>
    <img src = "img/lz12.jpg"/>
    <img src = "img/lz13.jpg"/>
    <img src = "img/lz14.jpg"/>
    <img src = "img/lz15.jpg"/>
    <img src = "img/lz16.jpg"/>
    <img src = "img/lz17.jpg"/>
    <img src = "img/lz18.jpg"/>
    <img src = "img/lz19.jpg"/>
    <img src = "img/lz20.jpg"/>
    <img src = "img/lz21.jpg"/>
    <img src = "img/lz22.jpg"/>
    <img src = "img/lz23.jpg"/>
    <img src = "img/lz24.jpg"/>
    <img src = "img/lz25.jpg"/>
    <img src = "img/lz26.jpg"/>
    <img src = "img/lz27.jpg"/>
    <img src = "img/lz28.jpg"/>
    <img src = "img/lz37.jpg"/>
    <img src = "img/lz30.jpg"/>
    <img src = "img/lz31.jpg"/>
    <img src = "img/lz32.jpg"/>
    <img src = "img/lz33.jpg"/>
    <img src = "img/lz34.jpg"/>
    <img src = "img/lz35.jpg"/>
    <img src = "img/lz36.jpg"/> 

</div>
<!--ä¾§è¾¹æ -->
<div >
    <div class="mst-nav-522-wrap mst-nav-522-wrap-l5">
        <div class="mst-nav-522" id="J_btn">
                <ul class="mst-nav-522-list clearfix">  
                    <li class="mst-nav-522-item mst-nav-522-item-4 active">
                        <a class="mst-nav-522-item-inner">è¡¬è¡«</a>
                    </li>  
                    <li class="mst-nav-522-item mst-nav-522-item-4">
                        <a class="mst-nav-522-item-inner">è¿è¡£è£™</a>
                    </li>  
                    <li class="mst-nav-522-item mst-nav-522-item-4">
                        <a class="mst-nav-522-item-inner">é’ˆç»‡è¡«</a>
                    </li>  
                    <li class="mst-nav-522-item mst-nav-522-item-4">
                        <a class="mst-nav-522-item-inner">ä¸‹è£…</a>
                    </li>  
                    <li class="mst-nav-522-item mst-nav-522-item-4  mst-nav-522-item-top" id ="btn">
                        <a class="mst-nav-522-item-inner">å›é¡¶éƒ¨</a>
                    </li>  
                </ul>
        </div>
    </div>
</div>
<!--  å…¨å±€è„šæœ¬  -->
<div class = "wrapper" id="specialContent"><!--  å®¹å™¨  -->

    <div class="plugin plugin-loaded">
        <div class="mst-ued-product-lc-wrap">
            <div class="mst-ued-product-lc-floor">
                <div class="mst-ued-product-lc-inner">
                    <div class="mst-ued-product-lc" id="floorWrap">
                        <!-- <ul class="mst-ued-product-lc-list mst-ued-product-lc-clearfix">
                            <li class="mst-ued-product-lc-item mst-ued-product-lc-item-1526385757905">
                                <a class="mst-ued-product-lc-img-wrap">
                                    <img class="mst-ued-product-lc-img" src="http://h2.appsimg.com/a.appsimg.com/upload/merchandise/pdc/699/341/4491854033661341699/0/1764928-5.jpg"/>
                                </a>
                                <a class="mst-ued-product-lc-desc">
                                    <div class="mst-ued-product-lc-brand-name" title="èˆ’æœ—">èˆ’æœ—</div>
                                    <div class="mst-ued-product-lc-name" title="éƒ½å¸‚ä¼‘é—²æ¡‘èš•ä¸å°è¡«">éƒ½å¸‚ä¼‘é—²æ¡‘èš•ä¸å°è¡«</div>
                                    <div class="mst-ued-product-lc-pms"data-pms-id="2610386">æ»¡498å‡100ï¼Œä¸Šä¸å°é¡¶</div>
                                    <div class="mst-ued-product-lc-price">
                                        <span class="mst-ued-product-lc-money-icon">ğŸ’°</span>
                                        <span class="mst-ued-product-lc-price-sell">418</span>
                                        <span class="mst-ued-product-lc-price-discount">(2.2æŠ˜)</span>
                                        <del class="mst-ued-product-lc-price-market">
                                            <span class="mst-ued-product-lc-money-icon">ğŸ’°</span>1880
                                        </del>
                                    </div>
                                    <div class="mst-ued-product-lc-btn" data-coupon-id="2610386">
                                        <div class="mst-ued-product-lc-btn-coupon">
                                            <p class="mst-ued-product-lc-btn-qiang">æŠ¢</p>
                                            <p>
                                                <span class="mst-ued-product-lc-money-icon">ğŸ’°</span>
                                                <span class="mst-ued-product-lc-btn-money"></span>
                                            </p>
                                        </div>
                                        <div class="mst-ued-product-lc-btn-like">æŠ¢å…ˆæ”¶è—</div>
                                    </div>
                                </a>
                            </li>
                        </ul> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src = "libs/jquery-3.3.1.js"></script>
<script src = "libs/active.js"></script>
<script>
 $(function(){
//      var  opt = {
//          url:"https://mst.vip.com/Special/getProductData?callback=jQuery110208681215568333267_1526385520856&page_id=5044090&floor=1f&mars_cid=1526369759558_bab631838d694989fd8f769a8200138f&is_personality=false&is_sinking=true&plugin_id=86083960&offset=0&limit=30&client=vipcms&is_pre_pay=0&_=1526385520861",
//          dataType:"jsonp"
//      }
//      $.ajax(opt)
//      .then(function(){
//          console.log(res)
//      })
        function WaterFall(url,main_selector){
                    if(!url || !main_selector) return;
                    this.url = url;
                    this.main_ele = $(main_selector);
                    this.init();
                    
        }
        WaterFall.prototype = {
            constructor:WaterFall,
                init(){
                    // this.page = 1;
                    this.load_data()
                    .then(function(res){
                        //å›è°ƒç»“æœ
                        // console.log(res.data);
                        this.json = res.data;
                        this.render_page();
                    }.bind(this))
                    .fail(function(def,type,err_msg){
                        // console.log(err_msg);
                    })
                    $(document).on("scroll",$.proxy(this.is_load,this))
                },
                load_data(){
                    this.opt = {
                        url:this.url,
                        type:"get",
                        // dataType:"jsonp",
                        // data:{page:this.page},
                        statusCode: {
                            404: function() {
                                alert('page not found');
                            },
                            403: function() {
                                alert('ä¸«ä¸è®©æˆ‘è®¿é—®!');
                            }
                        }
                    };
                    return $.ajax(this.opt)
                },
                render_page(){
                    this.html = "<ul>"

                    // console.log(this.json)
                    // console.log(this.json)
                    this.json.forEach(function(item){
                            // console.log(item);
                            // console.log(this.html);
                        this.html += `
                        <li class="mst-ued-product-lc-item mst-ued-product-lc-item-1526385757905">
                                <a class="mst-ued-product-lc-img-wrap">
                                    <img class="mst-ued-product-lc-img" src=${item.list_img}>
                                </a>
                                <a class="mst-ued-product-lc-desc">
                                    <div class="mst-ued-product-lc-brand-name" >${item.brand_show_name}</div>
                                    <div class="mst-ued-product-lc-name" >${item.name}</div>
                                    <div class="mst-ued-product-lc-pms"data-pms-id="2610386">æ»¡498å‡100ï¼Œä¸Šä¸å°é¡¶</div>
                                    <div class="mst-ued-product-lc-price">
                                        <span class="mst-ued-product-lc-money-icon">ğŸ’°</span>
                                        <span class="mst-ued-product-lc-price-sell">${item.sell_price}</span>
                                        <span class="mst-ued-product-lc-price-discount">(${item.discount})</span>
                                        
                                    </div>
                                    <div class="mst-ued-product-lc-btn" data-coupon-id="2610386">
                                        <div class="mst-ued-product-lc-btn-coupon">
                                            <p class="mst-ued-product-lc-btn-qiang">æŠ¢</p>
                                            <p>
                                                 <span class="mst-ued-product-lc-money-icon">ğŸ’°</span>
                                                <span class="mst-ued-product-lc-btn-money"></span>
                                            </p>
                                        </div>
                                        <div class="mst-ued-product-lc-btn-like">æŠ¢å…ˆæ”¶è—</div>
                                    </div>
                                </a>
                         </li>`
                    }.bind(this))
                    //  this.main_ele.html(this.html);
                    this.html += "</ul>"
                    // this.main_ele.html(this.html);
                    // console.log(this.main_ele);
                    this.main_ele.html(this.main_ele.html() + this.html);
                },
                sort_item(){

                },
                load_err(){
                    alert("hahahha")
                },
                is_load(){
                    this.scrollTop = $("html,body").scrollTop();
                    this.clientHeight = document.documentElement.clientHeight;
                    this.lastTop = this.main_ele.find("li").eq(this.main_ele.find("li").length - 1).position().top;
                    // console.log(this.scrollTop,this.clientHeight,this.lastTop) 
                    this.loading = false; //æ˜¯å¦ç¬¦åˆåŠ è½½æ¡ä»¶;
                    if(this.scrollTop + this.clientHeight >= this.lastTop){
                        this.loading = true;
                    }
                    if(!this.loading || this.loading_msg) return 0 ;
                    
                    this.loading_msg = true;
                    console.log("åŠ è½½æ¬¡æ•°",this.loading,this.loading_msg);
                //     this.page ++;
                    this.load_data()
                    .then(function(res){

                        // console.log(res);
                        this.json = res.data;
                        this.render_page();
                        this.sort_item();
                        this.loading_msg = false;
                    }.bind(this))
                }
        }
 new WaterFall("http://localhost:8888/libs/data.json",".mst-ued-product-lc");
})
</script>
</html>